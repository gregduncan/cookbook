<h1>Recipes</h1>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Created On</th>
            <th>Recipe</th>
        </tr>
    </thead>
    <tbody  *ngFor="let recipe of _recipes">
        <tr>
            <td>
                {{convertDateTime(recipe.CreatedOn)}}
            </td>
            <td>
                <h3>{{recipe.Title}}</h3>
                <p>{{recipe.Description}}</p>
                <a [routerLink]="[routes.recipe.name, {id: recipe.Id}]">View <i class="fa fa-angle-right"></i></a>
            </td>
        </tr>
    </tbody>
</table>

<h3>Create</h3>
<form #hf="ngForm">
    <div class="form-group">

        <div class="form-group">
            <input class="form-control" type="text" placeholder="Title" [(ngModel)]="_recipe.Title" required #title="ngForm" ngControl="title" />
            <div [hidden]="title.valid || title.untouched" class="alert alert-danger">
                Title is required
            </div>
        </div>

        <div class="form-group">
            <textarea class="form-control" placeholder="Description" [(ngModel)]="_recipe.Description" #description="ngForm" ngControl="description"></textarea>
        </div>

        <h4>Ingredients</h4>

        <div class="input-group">
            <input class="form-control" type="text" placeholder="Ingredient"  [(ngModel)]="_ingredient" required #ingredient="ngForm" ngControl="_ingredient" (keypress)="($event.which === 13) ? addIngredient() : 0" />
            <span class="input-group-btn">
                <button class="btn btn-default" type="button" (click)="addIngredient()">Add</button>
            </span>
        </div>

        <ul *ngFor="let ingredient of _ingredients">
            <li>
                {{ingredient.Title}}
                <a (click)="removeIngredient(ingredient)">
                    <i class="glyphicon glyphicon-remove"></i>
                </a>
            </li>
        </ul>

        <h4>Steps</h4>

        <div class="list-group">
            <textarea class="form-control" placeholder="Step"  [(ngModel)]="_step" required #step="ngForm" ngControl="_step"></textarea>
            <button class="btn btn-default" type="button" (click)="addStep()">Add</button>
        </div>

        <ul *ngFor="let step of _steps">
            <li>
                {{step.Title}}
                <a (click)="removeStep(step)">
                    <i class="glyphicon glyphicon-remove"></i>
                </a>
            </li>
        </ul>

        <button class="btn btn-default" type="button" (click)="submit()">Submit</button>

    </div>
</form>
